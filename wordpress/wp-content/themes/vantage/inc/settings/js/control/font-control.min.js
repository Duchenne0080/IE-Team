!function(r,c){var l={};r.controlConstructor["siteorigin-font"]=r.Control.extend({ready:function(){var n=this,e=n.container.find("select.font"),o=n.container.find("select.font-variant"),i=n.container.find("select.font-subset"),a=!1;e.change(function(){var t=c(this).find("option:selected");o.empty().val(""),i.empty().val(""),void 0!==t.data("variants")?(o.append(c("<option></option>")).val(""),c.each(t.data("variants").split(","),function(t,n){o.append(c("<option></option>").html(n))}),o.val("regular"),2<o.find("option").length?o.parent().show():o.parent().hide()):o.parent().hide(),void 0!==t.data("subsets")?(i.append(c("<option></option>")),c.each(t.data("subsets").split(","),function(t,n){i.append(c("<option></option>").html(n))}),i.val("latin"),2<i.find("option").length?i.parent().show():i.parent().hide()):i.parent().hide()});if(n.container.find("select").change(function(){if(a){var t={};t.font=e.val(),t.webfont=e.find("option:selected").data("webfont"),t.category=e.find("option:selected").data("category"),t.variant=o.val(),t.subset=i.val(),n.setting.set(JSON.stringify(t))}}),""!==n.setting()){var t=JSON.parse(n.setting());e.val(t.font).change(),o.val(t.variant),i.val(t.subset)}else e.change();var s=null;r.section(n.section()).container.on("expanded",function(){if(null===s){var o=null;e.on("chosen:ready",function(t,n){var e=n.chosen.dropdown,a=e.find(".chosen-results");e.find(".chosen-results").on("scroll",function(){clearTimeout(o),o=setTimeout(function(){var e,o,i=[];if(a.find("li").each(function(){var t=c(this),n=t.position().top;void 0!==t.attr("style")&&-1===t.attr("style").indexOf("__websafe")&&-10<n&&n<a.outerHeight()+30&&(o=t.attr("style").match(/font-family: ([^,]+),.*;/),e=o[1].replace(/'/g,"").trim(),void 0===l[e]&&(i.push(e),l[e]=!0))}),0<i.length){var t="//fonts.googleapis.com/css";t+="?family="+i.join("|").replace(" ","+"),c("<link/>",{rel:"stylesheet",type:"text/css",href:t+="&text=0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz"}).appendTo("head")}},500)}),setTimeout(function(){a.trigger("scroll")},500),n.chosen.search_field.on("keyup",function(){setTimeout(function(){a.trigger("scroll")},500)})}).on("chosen:showing_dropdown",function(t,n){n.chosen.dropdown.find(".chosen-results").trigger("scroll")}).chosen({allow_single_deselect:!0,search_contains:!0}),s=!0}a=!0})}})}(wp.customize,jQuery);